!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e,t,n){let o=null,r=[];this.push=function(c){t(o,c)||(r=[]),r.push(c),o=c;let i=r.length>=e;return i&&n(r),i}}function r(e,t){for(var n=[],o=0;o<e;o++){n[o]=[];for(var r=0;r<t;r++)n[o][r]={}}return n}function c(e){var t=document.createElement("table");return t.setAttribute("id","game-matrix"),e.forEach((e,n)=>{let o=document.createElement("tr");t.appendChild(o),e.forEach((e,t)=>{let r=document.createElement("td"),c=document.createElement("div");r.appendChild(c),o.appendChild(r),c.classList.add("ball"),w.setY(n)(c),w.setX(t)(c)})}),t}function i(){var e=0;return function(t){return e+=t}}function u(){S=i(),O=i(),T.innerText=0,q.innerText=0}function l(e){let t=[{from:4,to:5,modifier:2},{from:6,to:7,modifier:3},{from:8,to:9,modifier:4},{from:10,to:11,modifier:5}];for(let n=0;n<t.length;n++)if(e==t[n].from||e==t[n].to)return e*t[n].modifier;return 0}function a(){document.getElementById("next_ball_area").classList.toggle("hidden")}function f(){B=r(L,P),A.remove(),C.appendChild(c(B)),A=document.getElementById("game-matrix")}function d(){W.classList.remove(X),W.classList.remove(Y),W.classList.remove(D)}function s(){z=x(J),I(z),G=x(J),R.set_delete(G)}function m(e){""!==e.field&&(d(),W.classList.add(e.field),e.field===X&&j.f7x7(),e.field===Y&&j.f9x9(),e.field===D&&j.f11x11(),R.set_delete(G),s())}function g(e,t){return(e instanceof y?e.color:NaN)===(t instanceof y?t.color:NaN)}function p(e){B.forEach(function(t,n){let r=new o(e,g,v);t.forEach(function(e,t){r.push(B[n][t])})})}function h(e){B.forEach(function(t,n){let r=new o(e,g,v);t.forEach(function(e,t){r.push(B[t][n])})})}function E(){var e=!1,t=0;return B.forEach((n,o)=>{n.forEach((n,r)=>{B[o][r].hasOwnProperty("delete")&&(_(o,r),B[o][r]={},e=!0,t++)})}),T.innerText=S(l(t)),e}function v(e){e.forEach(e=>{e.delete="ok"})}function y(e){this.color=e,this.status=M}function k(e,t){b(e,t).classList.add(B[e][t].color)}function b(e,t){return A.rows[e].cells[t].firstChild}function x(e){for(var t=[],n=0;n<e;n++)t[n]=new y(Q.getColor());return t}function I(e){for(var t=0;t<e.length;t++){var n=Q.getInteger(0,B.length),o=Q.getInteger(0,B.length);K.cellIsEmpty(n,o)?(B[n][o]=e[t],k(n,o)):--t}p(H),h(H),setTimeout(E,500)}function _(e,t){b(e,t).classList.remove("animation"),b(e,t).classList.remove(B[e][t].color)}var L=9,P=9;let w={getY:e=>{return e.getAttribute("data-y")},setY:e=>{return t=>{t.dataset.y=e}},setX:e=>{return t=>{t.dataset.x=e}},getX:e=>{return e.getAttribute("data-x")}};Object.prototype.toString=(()=>{return""});let B=r(L,P),C=document.getElementById("game-field");C.appendChild(c(B)),document.getElementById("game-area").classList.add("field9x9");let A=document.getElementById("game-matrix");var O=i(),S=i(),q=document.getElementById("step"),T=document.getElementById("score");const X="field7x7",Y="field9x9",D="field11x11";document.getElementById("checkbox1").addEventListener("click",a);let N={gameParamWindow:()=>{return document.getElementById("game_parameters")},open:()=>{N.gameParamWindow().style.display="table"},close:()=>{N.gameParamWindow().style.display="none"}},j={f7x7:()=>{L=7,P=7,f(),H=3,J=2},f9x9:()=>{L=9,P=9,f(),H=4,J=3},f11x11:()=>{L=11,P=11,f(),H=5,J=4}},W=document.getElementById("game-area");document.querySelector(".button_new").addEventListener("click",e=>{f(),R.set_delete(G),s()}),document.querySelector(".button_sett").addEventListener("click",N.open),document.querySelector(".confirm_button").addEventListener("click",e=>{var t=document.forms.settings_form,n={};n.field=t.elements.field_size.value,e.preventDefault(),N.close(),m(n),u()}),document.querySelector(".cancel_button").addEventListener("click",e=>{N.close(),e.preventDefault()});let F="picked",M="unpicked";y.prototype.pick_ball=function(e){e.classList.add("animation"),this.status=F},y.prototype.unpick_ball=function(e){e.classList.remove("animation"),this.status=M};let z,G,H=4,J=3;var K={cellIsEmpty:(e,t)=>{return!B[e][t].hasOwnProperty("color")},ballIsPicked:(e,t)=>{return B[e][t].status===F},thereIsPickedBallsOnField:()=>{let e=!1;return B.forEach((t,n)=>{B[n].forEach((t,o)=>{K.ballIsPicked(n,o)&&(e=!0)})}),e}},Q={getColor:()=>{var e=["red","yellow","green","dark_blue","pink","blue","dark"];return e[Q.getInteger(0,e.length)]},getInteger:(e,t)=>{return parseInt(Math.random()*(t-e)+e)}},R={get_element_collection:()=>{return document.querySelectorAll(".next_ball")},set_delete:e=>{e.forEach((t,n)=>{R.get_element_collection()[n].classList.toggle(e[n].color)})}};s();var U={pick:(e,t,n)=>{B[t][n].pick_ball(e)},unpickAllPicked:function(){B.forEach((e,t)=>{e.forEach((e,n)=>{K.ballIsPicked(t,n)&&e.unpick_ball(b(t,n))})})},findAndDeletePicked:function(){let e;return B.forEach((t,n)=>{t.forEach((t,o)=>{K.ballIsPicked(n,o)&&(e=t.color,_(n,o),B[n][o]={})})}),e}},V=document.getElementById("game-field");V.addEventListener("click",function(e){var t=e.target,n=w.getX(t),o=w.getY(t);K.cellIsEmpty(o,n)||K.ballIsPicked(o,n)||(U.unpickAllPicked(),U.pick(t,o,n))}),V.addEventListener("click",function(e){var t=e.target,n=w.getX(t),o=w.getY(t);if(K.cellIsEmpty(o,n)&&K.thereIsPickedBallsOnField()){var r=U.findAndDeletePicked();B[o][n]=new y(r),k(o,n),q.textContent=O(1),p(H),h(H),setTimeout(function(){E()||(I(G),R.set_delete(G),G=x(J),R.set_delete(G))},500)}})}]);